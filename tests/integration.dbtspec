target:
  type: vertica
  host: localhost
  username: dbadmin
  password: ''
  database: docker
  schema: "dbt_test_{{ var('_dbt_random_suffix') }}"
  port: 5433
  threads: 1
projects:
  - overrides: incremental
    paths:
      "models/incremental.sql":
        materialized: incremental
        # Wrap in a CTE due to added seed name varchar being size 9 and seed base name varchar being size 8
        body: |
            with incremental_data as 
            (
              select id, name::varchar(9) as name, some_date from {{ source('raw', 'seed') }}
              {% if is_incremental() %}
              where id > (select max(id) from {{ this }})
              {% endif %}
            ) select * from incremental_data
sequences:
  test_dbt_empty: empty
  test_dbt_base: base
  test_dbt_ephemeral: ephemeral
  test_dbt_incremental: incremental
  # test_dbt_snapshot_strategy_timestamp: snapshot_strategy_timestamp
  # test_dbt_snapshot_strategy_check_cols: snapshot_strategy_check_cols
  test_dbt_data_test: data_test
  test_dbt_schema_test: schema_test
  test_dbt_ephemeral_data_tests: data_test_ephemeral_models